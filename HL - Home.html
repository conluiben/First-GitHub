<!DOCTYPE html>
<html>
	<title> Library - Home </title>
	<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" href="Book.png">
	<link rel = "stylesheet" href = "HL - Home.css">
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<meta charset="utf-8">
	<script src = "https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="jquery-ui-1.12.1.custom/jquery-ui.js"></script>
	<script src="jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>

	</head>
	<body onload = "loadLocStrge()">
		<div id = "main">
			<div id = "wlc">
				<div id = "wlcCtnt">
					<h1> Welcome to the Library! </h1>
					<q> People learn to read, then they read to learn. </q>
					<div id = "btnGrp">
						<button onclick = "window.location.href = 'HL - List of Books.html';"> Check the List </button>
						<button onclick = "window.location.href = 'HL - Add Book.html';"> Add a Book </button>
						<button> Borrow a Book </button>
						<button> Edit a Book </button>
					</div>
				</div>
			</div>
		</div>
		
		<script>
		"use strict";

		var lib;
		/* MAKING A TABLE */
		var makeTable, makeRow, makeCell, rows;

		function loadLocStrge()
		{
			if (localStorage.libProj==undefined)
			{
				lib = {
						"leader": "Mrs. Carrot",
						"coder": "Awesome Sauce",
						"allBooks":[
							{"name": "Pride and Prejudice", "author": "Jane Austen", "genre": "Fiction Classics"},
							{"name": "Eragon", "author": "Someone Else", "genre": "Fiction Sci-Fi"}
									]
						};
				localStorage.libProj = JSON.stringify(lib);
				console.log("Reload");
			}
			
			console.log(localStorage.libProj);
			lib = JSON.parse(localStorage.libProj);
			/* ADD MISSING PROPERTIES (IF THERE ARE) [[Condition, Status, Holder, Log]] */
			var i;
			for (i = 0; i<lib.allBooks.length; i++)
			{
				if (lib.allBooks[i].status===undefined) //status can be Available, Borrowed, Lost (or Misplaced)
					lib.allBooks[i].status = "Available";
				if (lib.allBooks[i].condition===undefined) //condition can be Excellent, Good, Fair, Poor, N/A (Lost)
					lib.allBooks[i].condition = "Excellent";
				if (lib.allBooks[i].holder===undefined) //holder has (full) name of person who last borrowed or held the book
					lib.allBooks[i].holder = "N/A";
				if (lib.allBooks[i].log===undefined) //log holds list of ALL actions on this book (added, edited, whatever)
				{
					var d = new Date(); //
					var mthLst = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
					//get month: mthLst[d.getMonth()], day: d.getDay() [starts from 1], year: d.getFullYear()
					//get hour (non-German): getHours() [add: % 12 for am/pm]
					//get min: getMinutes()
					lib.allBooks[i].log = [{
										"date": String(mthLst[d.getMonth()] + " " + d.getDate() + ", " + d.getFullYear()),
										"time": ((d.getHours() % 12) + ":" + d.getMinutes() + (d.getHours()>=12 ? "pm":"am")),
										"msg": "Book added to collection!"
									}];
				}
			}
			localStorage.libProj = JSON.stringify(lib);
			console.log(lib);
		}

		</script>
	</body>
</html>